import org.jetbrains.kotlin.gradle.tasks.KotlinCompile

plugins {
    id "android.library"
    alias(libs.plugins.kotlinx.serialization)
    alias(libs.plugins.ktorfit)
}

android {
    namespace 'com.savvasdalkitsis.uhuruphotos.feature.album.auto.domain.implementation'
}

kotlin {
    sourceSets {
        commonMain {
            dependencies {
                implementation libs.sqldelight.coroutines
                implementation project(":feature:album:auto:domain:api")
                implementation project(":feature:media:remote:domain:api")
                implementation project(":feature:people:domain:api")
                implementation project(":foundation:log:api")
                implementation project(":foundation:network:api")
            }
        }
    }
}

dependencies {
    add("kspCommonMainMetadata", libs.ktorfit.ksp)
}

tasks.withType(KotlinCompile).configureEach {
    if (name != "kspCommonMainKotlinMetadata") {
        dependsOn("kspCommonMainKotlinMetadata")
    }
}